<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
                http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans.xsd
                http://www.springframework.org/schema/context
                http://www.springframework.org/schema/context/spring-context.xsd
                http://www.springframework.org/schema/aop
                http://www.springframework.org/schema/aop/spring-aop.xsd
                http://www.springframework.org/schema/util 
                http://www.springframework.org/schema/util/spring-util-2.0.xsd
                http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd">
    <aop:aspectj-autoproxy /> 
    <context:annotation-config>
		<context:component-scan base-package="com.mootly.wcm"></context:component-scan>		
	</context:annotation-config>
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
	    <property name="locations">
	    	<list>
	    		<value>classpath:DITConnectorContext.properties</value>
	    		<value>classpath:CitrusIntegrationContext.properties</value>
	    	</list>	        	        
	    </property>
	</bean>
	
	<bean id="SOAPNameSpaceContext" class="com.mootly.wcm.services.ditws.soap.SOAPNameSpaceContext">
		<constructor-arg index="0">
			<map>
			    <entry key="soapenv" value="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry key="v" value="http://incometaxindiaefiling.gov.in/ditws/ITRVStatus/v_1_0"/>
				<entry key="pan" value="http://panws.dit.tcs.com/"/>
				<entry key="typ" value="http://panws.dit.tcs.com/types/"/>
				<entry key="mas" value="http://incometaxindiaefiling.gov.in/master"/>
				<entry key="ns2" value="http://incometaxindiaefiling.gov.in/ws/ds/common/v_1_0"/>
			</map>
		</constructor-arg>
		<constructor-arg index="1">
			<map>
			    <entry value="soapenv" key="http://schemas.xmlsoap.org/soap/envelope/"/>
				<entry value="v" key="http://incometaxindiaefiling.gov.in/ditws/ITRVStatus/v_1_0"/>
				<entry value="pan" key="http://panws.dit.tcs.com/"/>
				<entry value="typ" key="http://panws.dit.tcs.com/types/"/>
				<entry value="ns2" key="http://incometaxindiaefiling.gov.in/ws/ds/common/v_1_0"/>
			</map>
		</constructor-arg>
	</bean>
		
	<bean id="xPathFactory" class="javax.xml.xpath.XPathFactory" factory-method="newInstance"/>
	<bean id="xPath" class="javax.xml.xpath.XPath" factory-bean="xPathFactory" factory-method="newXPath">
		<property name="namespaceContext" ref="SOAPNameSpaceContext"/>
	</bean>
	
    <bean id="soapConnectionFactory" class="javax.xml.soap.SOAPConnectionFactory" factory-method="newInstance"/>
    <bean id="soapFactory" class="javax.xml.soap.SOAPFactory" factory-method="newInstance"/>
    <bean id="messageFactory" class="javax.xml.soap.MessageFactory"  factory-method="newInstance"/>
    <bean id="soapConnection" class="javax.xml.soap.SOAPConnection" factory-method="createConnection" factory-bean="soapConnectionFactory"/>
    
    <bean id="soapService" class="com.mootly.wcm.services.ditws.soap.SOAPService"> 
    	<property name="logFileLocationBaseDir" value="${soap_service_log_base_dir}"/>   
    	<property name="enableMockSubmission" value="true"/>
    	<property name="realSubmissionEndpoint" value="https://incometaxindiaefiling.gov.in/e-FilingWS/ditws"/>
    	<property name="submitITROperationName" value="submitITR"/>
    	
    </bean>
    
    <bean id="endPointURL_AddClientDetails" class="java.net.URL">
    	<constructor-arg value="${endPointURL_AddClientDetails}"/>
    </bean>
    
    <bean id="endPointURL_RetrievePANInformation" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrievePANInformation}"/>
    </bean>
    
    <bean id="endPointURL_Retrieve26ASInformation" class="java.net.URL">
    	<constructor-arg value="${endPointURL_Retrieve26ASInformation}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveRectificationStatus" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveRectificationStatus}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveRefundStatus" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveRefundStatus}"/>
    </bean>    
    
    <bean id="endPointURL_SubmitBulkITR" class="java.net.URL">
    	<constructor-arg value="${endPointURL_SubmitBulkITR}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveITRVStatus" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveITRVStatus}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveITRVByAckNo" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveITRVByAckNo}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveITRVByTokenNo" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveITRVByTokenNo}"/>
    </bean>
    
    <bean id="endPointURL_RetrieveTANInformation" class="java.net.URL">
    	<constructor-arg value="${endPointURL_RetrieveTANInformation}"/>
    </bean>
    
    <bean id="ditSOAPServiceImpl" class="com.mootly.wcm.services.ditws.impl.DITSOAPServiceImpl" abstract="true" >
        <constructor-arg index="0" value="${userName}"/>
        <constructor-arg index="1" value="${password}"/>
        <constructor-arg index="2" value="${certChain}"/>
        <constructor-arg index="3" value="${signature}"/>
        <constructor-arg index="4" ref="soapService"/>
        
        <constructor-arg index="5" ref="itReturnComponentHelper"></constructor-arg>
      	<constructor-arg index="6" value="false"/>
      	<constructor-arg index="7" value="${soapRequestSaveLocation}"/>
      	<constructor-arg index="8" value="true"/>
    </bean>
    
    <import resource="AddClientDetails.xml"/>
    <import resource="RetrievePANInformation.xml"/>
    <import resource="RetrieveTANInformation.xml"/>
    <import resource="Retrieve26ASInformation.xml"/>
    <import resource="RetrieveRectificationStatus.xml"/>
    <import resource="RetrieveRefundStatus.xml"/>
    <import resource="RetrieveITRV.xml"/>
    <import resource="SubmitBulkITR.xml"/>
   <!-- 
   <import resource="CaseGetWorkLogService.xml"/>  
   <import resource="KnovaInputQueryService.xml"/>
   <import resource="KnovaInputCreateService.xml"/>   
   <import resource="GetCaseByCriteria.xml"/>
    -->
</beans>
